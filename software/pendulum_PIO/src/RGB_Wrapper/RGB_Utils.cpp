#include "stdint.h"
#include "RGB_Utils.hpp"


#define Q_PULSE_SCALED_LUT_SIZE 136
#define Q_PULSE_SCALED_LUT_MAX_IDX 135

static float q_pulse_scaled_to_1_lut_arr[136] = 
{
    1.00000000f,
    0.91514166f,
    0.83961928f,
    0.77218348f,
    0.71178025f,
    0.65751623f,
    0.60863087f,
    0.56447393f,
    0.52448726f,
    0.48818995f,
    0.45516614f,
    0.42505495f,
    0.39754223f,
    0.37235364f,
    0.34924884f,
    0.32801673f,
    0.30847136f,
    0.29044851f,
    0.27380277f,
    0.25840508f,
    0.24414063f,
    0.23090705f,
    0.21861288f,
    0.20717621f,
    0.19652358f,
    0.18658892f,
    0.17731276f,
    0.16864143f,
    0.16052642f,
    0.15292383f,
    0.14579385f,
    0.13910030f,
    0.13281031f,
    0.12689391f,
    0.12132377f,
    0.11607493f,
    0.11112454f,
    0.10645171f,
    0.10203723f,
    0.09786351f,
    0.09391435f,
    0.09017485f,
    0.08663127f,
    0.08327096f,
    0.08008221f,
    0.07705422f,
    0.07417698f,
    0.07144122f,
    0.06883836f,
    0.06636042f,
    0.06400000f,
    0.06175021f,
    0.05960464f,
    0.05755734f,
    0.05560273f,
    0.05373563f,
    0.05195120f,
    0.05024492f,
    0.04861254f,
    0.04705012f,
    0.04555394f,
    0.04412053f,
    0.04274663f,
    0.04142919f,
    0.04016534f,
    0.03895238f,
    0.03778777f,
    0.03666912f,
    0.03559420f,
    0.03456089f,
    0.03356718f,
    0.03261122f,
    0.03169120f,
    0.03080548f,
    0.02995245f,
    0.02913063f,
    0.02833861f,
    0.02757503f,
    0.02683865f,
    0.02612825f,
    0.02544270f,
    0.02478093f,
    0.02414191f,
    0.02352468f,
    0.02292831f,
    0.02235193f,
    0.02179470f,
    0.02125585f,
    0.02073461f,
    0.02023028f,
    0.01974217f,
    0.01926964f,
    0.01881206f,
    0.01836887f,
    0.01793948f,
    0.01752338f,
    0.01712004f,
    0.01672899f,
    0.01634976f,
    0.01598190f,
    0.01562500f,
    0.01527865f,
    0.01494245f,
    0.01461605f,
    0.01429909f,
    0.01399122f,
    0.01369213f,
    0.01340151f,
    0.01311905f,
    0.01284448f,
    0.01257751f,
    0.01231789f,
    0.01206537f,
    0.01181970f,
    0.01158066f,
    0.01134802f,
    0.01112157f,
    0.01090110f,
    0.01068642f,
    0.01047735f,
    0.01027369f,
    0.01007528f,
    0.00988194f,
    0.00969352f,
    0.00950986f,
    0.00933081f,
    0.00915622f,
    0.00898597f,
    0.00881991f,
    0.00865791f,
    0.00849986f,
    0.00834563f,
    0.00819511f,
    0.00804819f,
    0.00790476f,
    0.00776472f
};





float get_scaled_val_for_q_shaped_value_pulse_via_lut(float input_val_scaled_to_1)
{
    uint8_t tmp_ret_val;

    uint8_t tmp_scaled_val_u8 = (uint8_t)(100.0f * input_val_scaled_to_1);

    if(tmp_scaled_val_u8 > Q_PULSE_SCALED_LUT_MAX_IDX)
        tmp_ret_val = 0;
    else
        tmp_ret_val = q_pulse_scaled_to_1_lut_arr[tmp_scaled_val_u8];

    return tmp_ret_val;
}





